# My Personal Tmux Configuration
# -----------------------------
# Description: A well-commented config focusing on ergonomics and usability.

# --- General Behavior ---
set-option -g history-limit 20000      # Increase scrollback history for better context retention.
set-option -g detach-on-destroy on    # Detach from session when window/pane is closed, prevents session exit.
set-option -g renumber-windows on     # Renumber windows sequentially when one is closed.
set-option -g set-titles on           # Allow terminal to set window titles.
set-option -g set-titles-string '#S:#I:#W - tmux' # Set a descriptive window title format.
set-option -g base-index 1            # Start window numbering at 1 (more intuitive than 0).
set-window-option -g pane-base-index 1# Start pane numbering at 1.
set-option -g focus-events on         # Better editor integration (e.g., for Neovim focus events).

# --- Keybindings ---
# Remap prefix from 'C-b' to '`' (backtick).
# The backtick is easy to type and rarely conflicts with shell commands.
unbind C-b
set-option -g prefix `
bind-key ` send-prefix

# Reload config file with Prefix + r
# Uses the default path but provides a clear message.
bind r source-file ~/.tmux.conf \; display "Reloaded tmux.conf"

# Split panes using | for vertical and - for horizontal splits.
# The '-c "#{pane_current_path}"' flag ensures the new pane opens in the same directory.
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
unbind '"'
unbind %

# Switch panes using Alt-arrow without needing the prefix.
# This provides a more fluid, IDE-like navigation experience.
bind -n M-Left select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up select-pane -U
bind -n M-Down select-pane -D

# Enable mouse mode for intuitive scrolling, pane selection, and resizing.
set-option -g mouse on

# --- Appearance & Status Bar ---
# Don't rename windows automatically based on the running process.
set-option -g allow-rename off

# Visual notifications for activity in other windows.
set-window-option -g monitor-activity on
set-window-option -g visual-activity on

# Status bar styling
set-option -g status-position bottom
set-option -g status-justify left
set-option -g status-style "fg=colour137,bg=colour234" # yellow on dark grey

# Left side of status bar: Session Name
set-option -g status-left-length 40
set-option -g status-left "#[fg=colour232,bg=colour154] #S #[fg=colour154,bg=colour234,nobold,nounderscore,noitalics]\ue0b0"

# Right side of status bar: Date and Time
set-option -g status-right-length 40
set-option -g status-right "#[fg=colour233,bg=colour234,nobold,nounderscore,noitalics]\ue0b2#[fg=colour154,bg=colour233] %d %b %Y #[fg=colour233,bg=colour237,nobold,nounderscore,noitalics]\ue0b2#[fg=colour255,bg=colour237] %H:%M "

# Active window style
set-window-option -g window-status-current-style "fg=colour255,bg=colour31,bold"
set-window-option -g window-status-current-format " #I:#W#F "

# --- Plugins ---
# List of plugins managed by TPM (Tmux Plugin Manager)
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-resurrect' # Persists tmux environment across reboots
set -g @plugin 'tmux-plugins/tmux-continuum' # Automatically saves/restores sessions

# --- Plugin Configuration ---
# Enable automatic restoring of sessions when tmux starts.
set -g @continuum-restore 'on'

# --- Initialize TMUX plugin manager ---
# IMPORTANT: This line must be at the very bottom of your tmux.conf.
# It sources the TPM script which manages all the plugins listed above.
run '~/.tmux/plugins/tpm/tpm'
